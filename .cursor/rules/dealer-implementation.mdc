---
description:
globs:
alwaysApply: false
---
# Dealer Implementation

The Dealer component abstracts card dealing operations from the Game Engine, providing a clean and reusable interface for managing the deck and dealing cards in poker games.

## Key Components

1. **Dealer** (src/engine/Dealer.ts)
   - Manages deck creation, shuffling, and dealing operations
   - Tracks burned cards as per standard poker procedures
   - Provides methods for dealing hole cards and community cards

## Core Functionality

The Dealer provides these key capabilities:

1. **Deck Management**
   - Creates and initializes a standard 52-card deck
   - Shuffles the deck using the Fisher-Yates algorithm
   - Tracks remaining cards in the deck
   - Supports resetting the deck for a new hand

2. **Card Dealing**
   - Deals hole cards to players in a round-robin fashion
   - Deals community cards (flop, turn, river) to the table
   - Burns cards before dealing community cards (standard poker procedure)
   - Supports different game variants (e.g., 2 cards for Hold'em, 4 for Omaha)

3. **Integration with Game Engine**
   - Decouples deck management from game logic
   - Enables cleaner separation of responsibilities
   - Makes testing easier through component isolation
   - Provides hooks for custom dealing implementations (e.g., for testing)

## Usage Example

```typescript
// Create a dealer
const dealer = new Dealer();

// Deal hole cards to players
const dealtCards = dealer.dealHoleCards(players, 2); // 2 cards for Hold'em

// Deal community cards
const flopCards = dealer.dealFlop(table);
const turnCard = dealer.dealTurn(table);
const riverCard = dealer.dealRiver(table);

// Reset for a new hand
dealer.reset();
```

## Testing

The Dealer component is tested in `src/__tests__/engine/Dealer.test.ts` to verify:
- Proper initialization and deck shuffling
- Correct dealing of hole cards to active players
- Proper handling of burned cards
- Accurate tracking of remaining cards in the deck
- Dealing community cards in the correct sequence
- Proper resetting of the deck for a new hand

## GameEngine Integration

The Game Engine now uses the Dealer component for all card operations:
- No longer manages a deck directly
- Delegates all dealing operations to the Dealer
- Makes game flow code cleaner and more focused
- Enables future extensions (e.g., custom deck types, cheat detection)
